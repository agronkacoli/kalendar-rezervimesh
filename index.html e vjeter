<!DOCTYPE html>
<html lang="sq">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kalendar Rezervimesh Makine (Automatik)</title>
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.5/main.min.css" rel="stylesheet">
<style>
  #calendar { max-width: 600px; margin: 40px auto; }
</style>
</head>
<body>

<div id="calendar"></div>

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.5/main.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  var calendarEl = document.getElementById('calendar');
  var calendar = new FullCalendar.Calendar(calendarEl, {
    initialView: 'dayGridMonth',
    locale: 'sq',
    events: [],
  });
  calendar.render();

  // Lidhur me Sheet.best API tënd aktiv
  const sheetApiUrl = 'https://api.sheetbest.com/sheets/598db704-51e5-4940-8f3a-0fdbafc4d3f3';

  fetch(sheetApiUrl)
    .then(response => response.json())
    .then(data => {
      const events = data.map(row => ({
        title: row.title,
        start: row.start,
        end: row.end,
        color: row.title && row.title.toLowerCase() === 'busy' ? 'red' : 'green'
      }));
      events.forEach(event => calendar.addEvent(event));
    })
    .catch(error => console.error('Gabim në tërheqjen e të dhënave:', error));
});
</script>

</body>
</html>
