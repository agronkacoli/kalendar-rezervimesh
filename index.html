<!DOCTYPE html>
<html lang="sq">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kalendar Rezervimesh Makine</title>
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.5/main.min.css" rel="stylesheet">
<style>
  #calendar { max-width: 600px; margin: 40px auto; }
  .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; }
  .modal-content { background: white; padding: 20px; border-radius: 8px; text-align: center; }
</style>
</head>
<body>

<div id="calendar"></div>

<div id="modal" class="modal">
  <div class="modal-content">
    <p id="modal-text">A dëshironi të rezervoni këto data?</p>
    <button id="confirmBtn">Po, Rezervo</button>
    <button id="closeBtn">Anulo</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.5/main.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  var calendarEl = document.getElementById('calendar');
  var modal = document.getElementById('modal');
  var modalText = document.getElementById('modal-text');
  var confirmBtn = document.getElementById('confirmBtn');
  var closeBtn = document.getElementById('closeBtn');
  var selectedInfo = null;

  var blockedRanges = [
    { start: '2025-07-16', end: '2025-07-18' } // Bllokim datash 16-17 korrik
  ];

  function isBlocked(start, end) {
    return blockedRanges.some(function(range) {
      return (start < new Date(range.end)) && (end > new Date(range.start));
    });
  }

  var calendar = new FullCalendar.Calendar(calendarEl, {
    initialView: 'dayGridMonth',
    locale: 'sq',
    selectable: true,
    events: [
      { title: 'Rezervim i bërë', start: '2025-07-10', end: '2025-07-13', color: 'grey' },
      { title: 'Rezervim i bërë', start: '2025-07-18', end: '2025-07-19', color: 'grey' },
      { title: 'Test Rezervim', start: '2025-07-22', end: '2025-07-23', color: 'grey' },
      { title: 'Bllokuar', start: '2025-07-16', end: '2025-07-18', color: 'red' }
    ],
    select: function(info) {
      if (isBlocked(info.start, info.end)) {
        alert('Këto data janë të bllokuara dhe nuk mund të rezervohen.');
        calendar.unselect();
        return;
      }
      selectedInfo = info;
      modalText.textContent = 'Dëshiron të rezervosh nga ' + info.startStr + ' deri ' + info.endStr + '?';
      modal.style.display = 'flex';
    }
  });
  calendar.render();

  confirmBtn.addEventListener('click', function() {
    if (selectedInfo) {
      calendar.addEvent({
        title: 'Rezervim i ri',
        start: selectedInfo.startStr,
        end: selectedInfo.endStr,
        color: 'green'
      });
      modal.style.display = 'none';
      selectedInfo = null;
    }
  });

  closeBtn.addEventListener('click', function() {
    modal.style.display = 'none';
    selectedInfo = null;
  });
});
</script>

</body>
</html>
